<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音乐播放器 - 带歌曲列表</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- 配置Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6', // 蓝色主色调
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    }
                }
            }
        }
    </script>
    
    <style>
        /* 进度条样式 */
        .progress-bar {
            -webkit-appearance: none;
            height: 4px;
            border-radius: 2px;
            background: rgba(255,255,255,0.2);
            outline: none;
        }
        
        .progress-bar::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #3B82F6;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .progress-bar::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.8);
        }
        
        /* 音量滑块样式 */
        .volume-slider {
            -webkit-appearance: none;
            height: 2px;
            border-radius: 1px;
            background: rgba(255,255,255,0.3);
            outline: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
        }
        
        /* 黑胶旋转动画 */
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .rotating {
            animation: rotate 20s linear infinite;
        }
        
        .rotating.paused {
            animation-play-state: paused;
        }

        /* 列表项悬停效果 */
        .song-item {
            transition: all 0.2s ease;
        }
        
        .song-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .song-item.active {
            background-color: rgba(59, 130, 246, 0.2);
            border-left: 3px solid #3B82F6;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-dark to-slate-800 text-light min-h-screen flex flex-col">
    <!-- 顶部导航 -->
    <header class="py-4 px-6 flex justify-between items-center bg-dark/70 backdrop-blur-sm">
        <div class="flex items-center gap-2">
            <i class="fa fa-music text-primary text-2xl"></i>
            <h1 class="text-xl font-bold">音乐胶囊</h1>
        </div>
        <div>
            <button class="text-gray-300 hover:text-white transition-colors">
                <i class="fa fa-cog"></i>
            </button>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="flex-grow container mx-auto px-4 py-8 flex flex-col md:flex-row gap-8">
        <!-- 播放器区域 -->
        <div class="w-full md:w-1/2 flex flex-col items-center justify-center">
            <!-- 专辑封面 -->
            <div class="relative mb-8 w-64 h-64 md:w-80 md:h-80">
                <!-- 黑胶唱片效果 -->
                <div class="absolute inset-0 rounded-full bg-slate-700 shadow-2xl overflow-hidden">
                    <div class="w-full h-full p-1">
                        <div class="w-full h-full rounded-full bg-gradient-to-br from-slate-900 to-slate-700 relative overflow-hidden rotating paused" id="album-cover">
                            <!-- 唱片纹路 -->
                            <div class="absolute inset-0 opacity-20">
                                <div class="absolute inset-4 rounded-full border-2 border-white/20"></div>
                                <div class="absolute inset-8 rounded-full border-2 border-white/20"></div>
                                <div class="absolute inset-12 rounded-full border-2 border-white/20"></div>
                                <div class="absolute inset-16 rounded-full border-2 border-white/20"></div>
                                <div class="absolute inset-20 rounded-full border-2 border-white/20"></div>
                            </div>
                            
                            <!-- 歌曲封面 -->
                            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-1/3 h-1/3 rounded-full overflow-hidden border-4 border-slate-800" id="current-cover">
                                <img src="https://picsum.photos/id/1082/200/200" alt="歌曲封面" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 歌曲信息 -->
            <div class="text-center mb-8">
                <h2 class="text-2xl md:text-3xl font-bold mb-2" id="current-title">音乐胶囊</h2>
                <p class="text-gray-400" id="current-artist">独属于你的音乐歌单</p>
            </div>
            
            <!-- 进度条 -->
            <div class="w-full max-w-md mb-6">
                <div class="flex justify-between text-sm text-gray-400 mb-1">
                    <span id="current-time">0:00</span>
                    <span id="total-time">3:45</span>
                </div>
                <input type="range" min="0" max="225" value="0" class="progress-bar w-full" id="progress-bar">
            </div>
            
            <!-- 播放控制 -->
            <div class="flex items-center gap-6 md:gap-8">
                <button class="text-gray-400 hover:text-white transition-colors" id="volume-btn">
                    <i class="fa fa-volume-up text-xl"></i>
                </button>
                <div class="hidden md:block w-24">
                    <input type="range" min="0" max="100" value="80" class="volume-slider w-full" id="volume-slider">
                </div>
                <button class="text-gray-300 hover:text-white transition-colors" id="prev-btn">
                    <i class="fa fa-step-backward text-2xl"></i>
                </button>
                <button class="bg-primary hover:bg-primary/90 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg hover:shadow-primary/30 transition-all transform hover:scale-105" id="play-pause-btn">
                    <i class="fa fa-play text-2xl"></i>
                </button>
                <button class="text-gray-300 hover:text-white transition-colors" id="next-btn">
                    <i class="fa fa-step-forward text-2xl"></i>
                </button>
                <button class="text-gray-400 hover:text-white transition-colors" id="loop-btn">
                    <i class="fa fa-repeat text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- 歌曲列表 -->
        <div class="w-full md:w-1/2 bg-dark/50 backdrop-blur-sm rounded-xl p-6 shadow-xl">
            <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                <i class="fa fa-list text-primary"></i>
                播放列表
            </h3>
            
            <div class="space-y-1 max-h-[500px] overflow-y-auto pr-2" id="playlist">
                <!-- 歌曲列表项 -->
                <div class="song-item active p-3 rounded flex items-center gap-3 cursor-pointer" 
                     data-id="1"
                     data-title="稻香"
                     data-artist="周杰伦-魔杰座"
                     data-audio="周杰伦 - 稻香.mp3"
                     data-cover="https://picsum.photos/id/1082/200/200"
                     data-duration="3:43">
                    <div class="w-10 h-10 rounded overflow-hidden flex-shrink-0">
                        <img src="OIP-C.jpg" alt="歌曲封面" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-grow min-w-0">
                        <div class="font-medium truncate">稻香</div>
                        <div class="text-sm text-gray-400 truncate">周杰伦-魔杰座</div>
                    </div>
                    <div class="text-gray-400 text-sm">3:45</div>
                    <div class="text-primary">
                        <i class="fa fa-volume-up"></i>
                    </div>
                </div>
                
                <div class="song-item p-3 rounded flex items-center gap-3 cursor-pointer"
                     data-id="2"
                     data-title="海洋波浪"
                     data-artist="放松音乐"
                     data-audio="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"
                     data-cover="https://picsum.photos/id/1029/200/200"
                     data-duration="7:05">
                    <div class="w-10 h-10 rounded overflow-hidden flex-shrink-0">
                        <img src="https://picsum.photos/id/1029/60/60" alt="歌曲封面" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-grow min-w-0">
                        <div class="font-medium truncate">海洋波浪</div>
                        <div class="text-sm text-gray-400 truncate">放松音乐</div>
                    </div>
                    <div class="text-gray-400 text-sm">4:12</div>
                    <div class="text-gray-500 opacity-0">
                        <i class="fa fa-play"></i>
                    </div>
                </div>
                
                <div class="song-item p-3 rounded flex items-center gap-3 cursor-pointer"
                     data-id="3"
                     data-title="森林鸟鸣"
                     data-artist="自然录音"
                     data-audio="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"
                     data-cover="https://picsum.photos/id/1063/200/200"
                     data-duration="5:44">
                    <div class="w-10 h-10 rounded overflow-hidden flex-shrink-0">
                        <img src="https://picsum.photos/id/1063/60/60" alt="歌曲封面" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-grow min-w-0">
                        <div class="font-medium truncate">森林鸟鸣</div>
                        <div class="text-sm text-gray-400 truncate">自然录音</div>
                    </div>
                    <div class="text-gray-400 text-sm">3:58</div>
                    <div class="text-gray-500 opacity-0">
                        <i class="fa fa-play"></i>
                    </div>
                </div>
                
                <div class="song-item p-3 rounded flex items-center gap-3 cursor-pointer"
                     data-id="4"
                     data-title="雨夜之声"
                     data-artist="环境音乐"
                     data-audio="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"
                     data-cover="https://picsum.photos/id/1065/200/200"
                     data-duration="5:02">
                    <div class="w-10 h-10 rounded overflow-hidden flex-shrink-0">
                        <img src="https://picsum.photos/id/1065/60/60" alt="歌曲封面" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-grow min-w-0">
                        <div class="font-medium truncate">雨夜之声</div>
                        <div class="text-sm text-gray-400 truncate">环境音乐</div>
                    </div>
                    <div class="text-gray-400 text-sm">5:20</div>
                    <div class="text-gray-500 opacity-0">
                        <i class="fa fa-play"></i>
                    </div>
                </div>
                
                <div class="song-item p-3 rounded flex items-center gap-3 cursor-pointer"
                     data-id="5"
                     data-title="山间微风"
                     data-artist="自然之声"
                     data-audio="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"
                     data-cover="https://picsum.photos/id/1018/200/200"
                     data-duration="5:53">
                    <div class="w-10 h-10 rounded overflow-hidden flex-shrink-0">
                        <img src="https://picsum.photos/id/1018/60/60" alt="歌曲封面" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-grow min-w-0">
                        <div class="font-medium truncate">山间微风</div>
                        <div class="text-sm text-gray-400 truncate">自然之声</div>
                    </div>
                    <div class="text-gray-400 text-sm">4:05</div>
                    <div class="text-gray-500 opacity-0">
                        <i class="fa fa-play"></i>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 音频元素 -->
    <audio id="audio-player" preload="metadata">
        <source src="" type="audio/mpeg">
        您的浏览器不支持音频播放
    </audio>

    <script>
        // 获取DOM元素
        const audio = document.getElementById('audio-player');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const progressBar = document.getElementById('progress-bar');
        const currentTimeEl = document.getElementById('current-time');
        const totalTimeEl = document.getElementById('total-time');
        const volumeBtn = document.getElementById('volume-btn');
        const volumeSlider = document.getElementById('volume-slider');
        const loopBtn = document.getElementById('loop-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const albumCover = document.getElementById('album-cover');
        const currentTitle = document.getElementById('current-title');
        const currentArtist = document.getElementById('current-artist');
        const currentCover = document.querySelector('#current-cover img');
        const playlist = document.getElementById('playlist');
        const songItems = document.querySelectorAll('.song-item');
        
        // 当前播放的歌曲索引
        let currentSongIndex = 0;
        let isPlaying = false;
        
        // 播放/暂停功能
        playPauseBtn.addEventListener('click', togglePlayPause);
        
        function togglePlayPause() {
            if (audio.paused) {
                audio.play();
                playPauseBtn.innerHTML = '<i class="fa fa-pause text-2xl"></i>';
                albumCover.classList.remove('paused');
                isPlaying = true;
            } else {
                audio.pause();
                playPauseBtn.innerHTML = '<i class="fa fa-play text-2xl"></i>';
                albumCover.classList.add('paused');
                isPlaying = false;
            }
        }
        
        // 音频元数据加载完成后更新总时长
        audio.addEventListener('loadedmetadata', function() {
            const totalSeconds = Math.floor(audio.duration);
            progressBar.max = totalSeconds;
            totalTimeEl.textContent = formatTime(totalSeconds);
        });
        
        // 实时更新进度条
        audio.addEventListener('timeupdate', function() {
            progressBar.value = Math.floor(audio.currentTime);
            currentTimeEl.textContent = formatTime(Math.floor(audio.currentTime));
        });
        
        // 拖动进度条改变播放位置
        progressBar.addEventListener('input', function() {
            audio.currentTime = this.value;
            currentTimeEl.textContent = formatTime(this.value);
        });
        
        // 音量控制
        volumeSlider.addEventListener('input', function() {
            audio.volume = this.value / 100;
            updateVolumeIcon();
        });
        
        // 更新音量图标
        function updateVolumeIcon() {
            if (audio.muted) {
                volumeBtn.innerHTML = '<i class="fa fa-volume-off text-xl"></i>';
            } else if (volumeSlider.value == 0) {
                volumeBtn.innerHTML = '<i class="fa fa-volume-off text-xl"></i>';
            } else if (volumeSlider.value < 50) {
                volumeBtn.innerHTML = '<i class="fa fa-volume-down text-xl"></i>';
            } else {
                volumeBtn.innerHTML = '<i class="fa fa-volume-up text-xl"></i>';
            }
        }
        
        // 静音切换
        volumeBtn.addEventListener('click', function() {
            audio.muted = !audio.muted;
            updateVolumeIcon();
        });
        
        // 循环播放切换
        loopBtn.addEventListener('click', function() {
            audio.loop = !audio.loop;
            loopBtn.classList.toggle('text-primary', audio.loop);
        });
        
        // 播放指定歌曲
        function playSong(index) {
            const songItems = document.querySelectorAll('.song-item');
            if (index < 0 || index >= songItems.length) return;
            
            const song = songItems[index];
            
            // 更新当前播放歌曲样式
            songItems.forEach((item, i) => {
                item.classList.remove('active');
                const icon = item.querySelector('i');
                if (i === index) {
                    icon.className = 'fa fa-volume-up';
                    item.querySelector('div:last-child').classList.remove('text-gray-500', 'opacity-0');
                    item.querySelector('div:last-child').classList.add('text-primary');
                } else {
                    icon.className = 'fa fa-play';
                    item.querySelector('div:last-child').classList.add('text-gray-500', 'opacity-0');
                    item.querySelector('div:last-child').classList.remove('text-primary');
                }
            });
            
            song.classList.add('active');
            
            // 更新歌曲信息
            currentTitle.textContent = song.dataset.title;
            currentArtist.textContent = song.dataset.artist;
            currentCover.src = song.dataset.cover;
            totalTimeEl.textContent = song.dataset.duration;
            
            // 更新音频源并播放
            audio.src = song.dataset.audio;
            audio.load();
            
            // 如果之前是播放状态，继续播放
            if (isPlaying) {
                audio.play().then(() => {
                    albumCover.classList.remove('paused');
                    playPauseBtn.innerHTML = '<i class="fa fa-pause text-2xl"></i>';
                });
            }
            
            // 更新当前歌曲索引
            currentSongIndex = index;
        }
        
        // 上一曲
        prevBtn.addEventListener('click', function() {
            const songItems = document.querySelectorAll('.song-item');
            let newIndex = currentSongIndex - 1;
            if (newIndex < 0) newIndex = songItems.length - 1;
            playSong(newIndex);
        });
        
        // 下一曲
        nextBtn.addEventListener('click', function() {
            const songItems = document.querySelectorAll('.song-item');
            let newIndex = currentSongIndex + 1;
            if (newIndex >= songItems.length) newIndex = 0;
            playSong(newIndex);
        });
        
        // 点击列表项播放歌曲
        playlist.addEventListener('click', function(e) {
            const songItem = e.target.closest('.song-item');
            if (songItem) {
                const songItems = Array.from(document.querySelectorAll('.song-item'));
                const index = songItems.indexOf(songItem);
                if (index !== -1) {
                    playSong(index);
                }
            }
        });
        
        // 列表项鼠标悬停效果
        playlist.addEventListener('mouseover', function(e) {
            const songItem = e.target.closest('.song-item:not(.active)');
            if (songItem) {
                const icon = songItem.querySelector('i');
                if (icon) {
                    songItem.querySelector('div:last-child').classList.remove('opacity-0');
                }
            }
        });
        
        playlist.addEventListener('mouseout', function(e) {
            const songItem = e.target.closest('.song-item:not(.active)');
            if (songItem) {
                const icon = songItem.querySelector('i');
                if (icon) {
                    songItem.querySelector('div:last-child').classList.add('opacity-0');
                }
            }
        });
        
        // 时间格式化函数（将秒转换为分:秒格式）
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${minutes}:${secs < 10 ? '0' + secs : secs}`;
        }
        
        // 音频播放结束时自动播放下一曲
        audio.addEventListener('ended', function() {
            if (!audio.loop) {
                const songItems = document.querySelectorAll('.song-item');
                let newIndex = currentSongIndex + 1;
                if (newIndex >= songItems.length) newIndex = 0;
                playSong(newIndex);
            }
        });
    </script>
</body>
</html>
